<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Server Status</title>
<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>

<header>
  <h1>Server Status</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="gallery.html">Gallery</a>
  <a href="community.html">Community</a>
  <a href="about.html">About</a>
</nav>

<div class="card">
  <p>Status: <span id="server-status">Loading...</span></p>
  <p>Players Online: <span id="player-count">Loading...</span></p>
  <ul id="player-list"></ul>
</div>

<script>
// This is the original working approach
const serverIP = "introduction-perfume.gl.at.ply.gg:40238";

// This function simulates the fetch using the previous working method
async function updateServerStatus() {
  try {
    // The original script used a working API that returned JSON for your server
    const response = await fetch(`https://api.mcsrvstat.us/bedrock/2/${serverIP}`);
    const data = await response.json();

    if (data.online) {
      document.getElementById('server-status').textContent = "Online";
      document.getElementById('server-status').classList.add("online");
      document.getElementById('server-status').classList.remove("offline");

      const count = data.players?.online || 0;
      const max = data.players?.max || 0;
      document.getElementById('player-count').textContent = `${count} / ${max}`;

      const listEl = document.getElementById("player-list");
      listEl.innerHTML = "";
      if (data.players?.list) {
        data.players.list.forEach(player => {
          const li = document.createElement("li");
          li.textContent = player;
          listEl.appendChild(li);
        });
      }
    } else {
      document.getElementById('server-status').textContent = "Offline";
      document.getElementById('server-status').classList.add("offline");
      document.getElementById('server-status').classList.remove("online");
      document.getElementById('player-count').textContent = "0";
      document.getElementById('player-list').innerHTML = "";
    }
  } catch (err) {
    console.error(err);
    document.getElementById('server-status').textContent = "Error";
    document.getElementById('server-status').classList.add("offline");
    document.getElementById('server-status').classList.remove("online");
    document.getElementById('player-count').textContent = "0";
    document.getElementById('player-list').innerHTML = "";
  }
}

// Update immediately
updateServerStatus();

// Optional: refresh every 30 seconds
setInterval(updateServerStatus, 30000);
</script>

</body>
</html>
